<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventaire Scanner</title>
    <link rel="manifest" href="/static/manifest.json">
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>
    <header>
        <h1>Bienvenue Ã  lâ€™application dâ€™Ayisha et Ashfack (v7)</h1>
        <div class="stats-grid">
            <div class="stat-item">Total: <b id="stat-total">0</b></div>
            <div class="stat-item">Ã€ surveiller: <b id="stat-watch">0</b></div>
            <div class="stat-item">ExpirÃ©s: <b id="stat-expired">0</b></div>
        </div>
    </header>

    <main>
        <section id="input-area">
          <div class="scanner-actions">
              <button id="btn-scan" class="btn-primary">ğŸ“· Scanner en Direct</button>
              <button id="btn-browse" class="btn-secondary">ğŸ“ Choisir une Photo</button>
          </div>
          <input type="file" id="qr-input-file" accept="image/*" style="display:none">
          <div id="interactive" class="viewport"></div>

            <form id="product-form" class="card">
                <input type="text" id="p-name" placeholder="Nom du produit" required>
                <input type="text" id="p-barcode" placeholder="Code-barres (8, 12, 13, 14 chiffres)">
                <input type="date" id="p-expiry" required>
                <button type="submit" class="btn-success">Enregistrer le produit</button>
            </form>
        </section>

        <nav class="tabs">
            <button class="tab-link active" onclick="switchTab('stock')">Inventaire</button>
            <button class="tab-link" onclick="switchTab('wasted')">GaspillÃ©s</button>
            <button class="tab-link" onclick="switchTab('archived')">ArchivÃ©s</button>
        </nav>

        <div id="list-container" class="grid"></div>

        <div class="admin-actions">
            <button onclick="exportData()">ğŸ“¤ Exporter JSON</button>
            <input type="file" id="import-file" hidden onchange="importAndMerge(event)">
            <button onclick="document.getElementById('import-file').click()">ğŸ“¥ Importer & Fusionner</button>
        </div>
    </main>

    <script type="module" src="/static/js/app.js"></script>
</body>
</html>